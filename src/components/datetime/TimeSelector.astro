---
import DatetimePicker from '@components/datetime/DatetimePicker.astro';
import DatetimeSlider from '@components/datetime/DatetimeSlider.astro';
import { Translator } from '@utils/i18n.js';
const translator = new Translator(Astro.currentLocale || 'en'); 
await translator.init();
interface Props {
  phase: string;
  startMinDate: Date;
  startDate: Date;
  endDate: Date;
  hideTitle?: Boolean;
  nojs? : Boolean
}

const { phase, startDate, endDate, startMinDate, hideTitle, nojs} = Astro.props;
const title = t(`phases.${phase}.title`);
const duration = (+ new Date(endDate) -  + new Date(startDate)) / 1000 / 60;
---

<div class="time-selector" data-phase={phase}>
  { hideTitle ?  <h3 class="title">{ title }</h3> : null }
  { nojs ? (
    <br/>
    <DatetimePicker nojs index={0} date={startDate} min={startMinDate} id={`start-date-picker-${phase}`} />
    <br/>
    <DatetimePicker nojs index={1} date={endDate} min={startDate} id={`end-date-picker-${phase}`} />
  ) : (
    <br/>
    <DatetimePicker index={0} date={startDate} min={startMinDate} id={`start-date-picker-${phase}`} />
    <br/>
    <DatetimePicker index={1} date={endDate} min={startDate} id={`end-date-picker-${phase}`} />
    <br/>
    <DatetimeSlider duration={duration} id={`datetime-slider-${phase}`} />
    <br/>
  )}
</div>
